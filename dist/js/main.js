(function () {
    'use strict';

    document.querySelectorAll('.range-input').forEach((rangeInput) => {
        const rangeContainer = rangeInput.closest('.range');
        const marks = rangeContainer.querySelectorAll('.range-mark');

        function updateMarks(value) {
            marks.forEach((mark, i) => {
                mark.style.visibility = (i == value) ? 'hidden' : 'visible';
            });
        }

        rangeInput.addEventListener('input', (e) => {
            updateMarks(+e.target.value);
        });

        updateMarks(+rangeInput.value);
    });

    document.querySelectorAll('.calculator__period-switcher').forEach((switcher) => {
        const left = switcher.querySelector('.switcher__left');
        const right = switcher.querySelector('.switcher__right');

        left.addEventListener('click', () => {
            left.classList.add('switcher__active');
            right.classList.remove('switcher__active');
        });

        right.addEventListener('click', () => {
            right.classList.add('switcher__active');
            left.classList.remove('switcher__active');
        });
    });


    document.addEventListener("DOMContentLoaded", () => {
        const userRange = document.getElementById("calculator__users-range");
        const userInput = document.querySelector(".calculator__users-count");
        const regionRange = document.getElementById("calculator__region-range");
        const regionInput = document.querySelector(".calculator__region-count");
        const resetButton = document.querySelector(".calculator__reset");

        const userValues = [10, 20, 30, 40, 50, 100];
        const regionValues = [1, 2, 3, 4, 5, 10];

        const basePrices = {
            base: 15000,
            standard: 25000,
            profi: 35000
        };

        const costTitles = {
            base: document.querySelector(".costs__base .costs__title + .costs__main-info + h5"),
            standard: document.querySelector(".costs__standart .costs__title + .costs__main-info + h5"),
            profi: document.querySelector(".costs__profi .costs__title + .costs__main-info + h5")
        };

        const userCards = document.querySelectorAll(".costs__block .costs__main-info .costs__item:nth-child(1) .costs__item-value");
        const regionCards = document.querySelectorAll(".costs__block .costs__main-info .costs__item:nth-child(2) .costs__item-value");

        const defaultUsers = userValues[0];
        const defaultRegions = regionValues[0];
        let isYearly = false;

        function updateMarks(rangeInput) {
            const rangeContainer = rangeInput.closest('.range');
            const marks = rangeContainer.querySelectorAll('.range-mark');
            marks.forEach((mark, i) => {
                mark.style.visibility = (i == +rangeInput.value) ? 'hidden' : 'visible';
            });
        }

        function updateCards(nodeList, value) {
            nodeList.forEach(el => el.textContent = value);
        }

        function updatePrices() {
            const users = parseInt(userInput.value, 10);
            const regions = parseInt(regionInput.value, 10);

            Object.keys(basePrices).forEach(plan => {
                let price = basePrices[plan];

                if (users > 10) {
                    price += Math.floor((users - 10) / 10) * 1000;
                }

                if (regions > 1) {
                    price += (regions - 1) * 1000;
                }

                if (isYearly) {
                    price = price * 12 * 0.7;
                    costTitles[plan].textContent = `${price.toLocaleString("ru-RU")} ₽/год`;
                } else {
                    costTitles[plan].textContent = `${price.toLocaleString("ru-RU")} ₽/месяц`;
                }
            });
        }

        function updateResetState() {
            resetButton.disabled =
                +userInput.value === defaultUsers &&
                +regionInput.value === defaultRegions &&
                !isYearly;
        }

        function syncSlider(input, slider, valuesArray) {
            const value = parseInt(input.value, 10);
            let index = valuesArray.indexOf(value);

            if (index === -1) {
                if (value < valuesArray[0]) {
                    index = 0;
                } else if (value > valuesArray[valuesArray.length - 1]) {
                    index = valuesArray.length - 1;
                } else {
                    index = valuesArray.findIndex(v => v >= value);
                }
            }

            slider.value = index;
            updateMarks(slider);
        }

        function handleSlider(slider, input, valuesArray, cardNodes) {
            slider.addEventListener("input", () => {
                const index = parseInt(slider.value, 10);
                const value = valuesArray[index];
                input.value = value;
                updateCards(cardNodes, value);
                updateMarks(slider);
                updatePrices();
                updateResetState();
            });
        }

        function handleInput(input, slider, valuesArray, cardNodes) {
            input.addEventListener("input", () => {
                const value = parseInt(input.value, 10);
                if (!isNaN(value)) {
                    updateCards(cardNodes, value);
                    syncSlider(input, slider, valuesArray);
                    updatePrices();
                    updateResetState();
                }
            });
        }

        function handleReset() {
            resetButton.addEventListener("click", () => {
                userRange.value = 0;
                regionRange.value = 0;
                userInput.value = defaultUsers;
                regionInput.value = defaultRegions;
                isYearly = false;
                document.querySelector(".switcher__left").classList.add("switcher__active");
                document.querySelector(".switcher__right").classList.remove("switcher__active");
                updateCards(userCards, defaultUsers);
                updateCards(regionCards, defaultRegions);
                updateMarks(userRange);
                updateMarks(regionRange);
                updatePrices();
                resetButton.disabled = true;
            });
        }

        document.querySelectorAll('.calculator__period-switcher').forEach((switcher) => {
            const left = switcher.querySelector('.switcher__left');
            const right = switcher.querySelector('.switcher__right');

            left.addEventListener('click', () => {
                left.classList.add('switcher__active');
                right.classList.remove('switcher__active');
                isYearly = false;
                updatePrices();
                updateResetState();
            });

            right.addEventListener('click', () => {
                right.classList.add('switcher__active');
                left.classList.remove('switcher__active');
                isYearly = true;
                updatePrices();
                updateResetState();
            });
        });

        function enforceLimits(input, min, max, slider, valuesArray) {
            input.addEventListener("input", () => {
                input.value = input.value.replace(/\D/g, "");

                if (input.value === "") {
                    input.value = min;
                }

                let value = parseInt(input.value, 10);
                if (value < min) value = min;
                if (value > max) value = max;

                input.value = value;
                syncSlider(input, slider, valuesArray);
            });
        }


        enforceLimits(userInput, 1, 1000, userRange, userValues);
        enforceLimits(regionInput, 1, 100, regionRange, regionValues);
        updateMarks(userRange);
        updateMarks(regionRange);
        updateCards(userCards, defaultUsers);
        updateCards(regionCards, defaultRegions);
        updatePrices();

        handleSlider(userRange, userInput, userValues, userCards);
        handleSlider(regionRange, regionInput, regionValues, regionCards);
        handleInput(userInput, userRange, userValues, userCards);
        handleInput(regionInput, regionRange, regionValues, regionCards);
        handleReset();
    });

    const allFeatureBlocks = document.querySelectorAll('.features__block');
    let lastScrollY = window.scrollY;

    allFeatureBlocks.forEach((block) => {
        const desktopCards = block.querySelectorAll('.features__cards_desktop .features__card');
        const mobileCards = block.querySelectorAll('.features__cards_mobile .features__card');

        if (!desktopCards.length && !mobileCards.length) return;

        const mobileCardsContainer = block.querySelector('.features__cards_mobile');

        let currentCardIndex = 0;
        let scrollLocked = false;
        let allowScroll = false;

        const cardsLength = desktopCards.length || mobileCards.length;

        const activateCard = (indexOrElement) => {
            let index;
            if (typeof indexOrElement === 'number') {
                index = indexOrElement;
            } else {
                index = [...desktopCards].indexOf(indexOrElement);
                if (index === -1) {
                    index = [...mobileCards].indexOf(indexOrElement);
                }
            }

            currentCardIndex = index;

            desktopCards.forEach((c, i) => {
                c.classList.toggle('features__card_active', i === index);
            });

            mobileCards.forEach((c, i) => {
                c.classList.toggle('features__card_active', i === index);
            });

            const activeId = desktopCards[index]?.dataset.id || mobileCards[index]?.dataset.id;

            block.querySelectorAll('.features__content-item').forEach(img => {
                img.classList.toggle('active', img.dataset.id === activeId);
            });

            if (mobileCardsContainer && mobileCards[index]) {
                mobileCards[index].scrollIntoView({ behavior: 'smooth', inline: 'center' });
            }
        };

        if (mobileCardsContainer && mobileCards.length) {
            const lastCard = mobileCards[mobileCards.length - 1];

            const mobileScrollObserver = new IntersectionObserver((entries) => {
                const entry = entries[0];
                if (entry.isIntersecting) {
                    allowScroll = true;
                    block.classList.remove('features__block_active');
                }
            }, {
                root: mobileCardsContainer,
                threshold: 0.9,
            });

            mobileScrollObserver.observe(lastCard);
        }

        const scrollHandler = (e) => {
            if (allowScroll || scrollLocked) return;

            const blockRect = block.getBoundingClientRect();

            const scrollingDown = e.deltaY > 0;
            if (!scrollingDown && blockRect.top > window.innerHeight - 100) {
                allowScroll = true;
                window.removeEventListener('wheel', scrollHandler, { passive: false });
                return;
            }

            e.preventDefault();
            scrollLocked = true;

            let nextIndex = scrollingDown
                ? Math.min(cardsLength - 1, currentCardIndex + 1)
                : Math.max(0, currentCardIndex - 1);

            activateCard(nextIndex);

            const isLast = scrollingDown && nextIndex === cardsLength - 1;
            const isFirst = !scrollingDown && nextIndex === 0;

            if (isLast || isFirst) {
                allowScroll = true;
                window.removeEventListener('wheel', scrollHandler, { passive: false });

                setTimeout(() => {
                    block.classList.remove('features__block_active');
                }, 300);
            }

            setTimeout(() => {
                scrollLocked = false;
            }, 400);
        };

        const observer = new IntersectionObserver(
            (entries) => {
                const entry = entries[0];
                const isVisible = entry.isIntersecting && entry.intersectionRatio > 0.5;

                if (!isVisible) return;

                const currentScrollY = window.scrollY;
                const scrollingDown = currentScrollY > lastScrollY;
                lastScrollY = currentScrollY;

                block.classList.add('features__block_active');

                currentCardIndex = scrollingDown ? 0 : cardsLength - 1;
                activateCard(currentCardIndex);

                allowScroll = false;
                scrollLocked = false;

                window.removeEventListener('wheel', scrollHandler, { passive: false });
                window.addEventListener('wheel', scrollHandler, { passive: false });
            },
            { threshold: 0.5 }
        );

        observer.observe(block);
    });

    document.querySelectorAll('.questions__item').forEach(item => {
        const info = item.querySelector('.questions__item-info');
        const img = item.querySelector('.questions__item-img');

        item.addEventListener('click', (e) => {
            if (e.target.closest('a')) return;

            const isActive = item.classList.contains('active');

            if (isActive) {
                item.classList.remove('active');
                info.style.maxHeight = null;
                img.style.transform = 'rotate(0deg)';
            } else {
                item.classList.add('active');
                info.style.maxHeight = info.scrollHeight + 16 + 'px';
                img.style.transform = 'rotate(180deg)';
            }
        });
    });

    // Главное меню
    document.addEventListener("DOMContentLoaded", function () {
        const btn = document.getElementById("btn-dropdown-menu");
        const menu = document.getElementById("dropdown-menu");

        if (btn && menu) {
            btn.addEventListener("click", function (e) {
                e.stopPropagation();
                menu.classList.toggle("show");
            });

            document.addEventListener("click", function (e) {
                if (!btn.contains(e.target)) {
                    menu.classList.remove("show");
                }
            });
        }
    });

    // Мобильное меню
    // Мобильное меню
    document.addEventListener("DOMContentLoaded", function () {
        const menuButton = document.querySelector(".nav_mobile .button-icon");
        const mobileMenu = document.querySelector(".nav_mobile-links");

        if (menuButton && mobileMenu) {
            menuButton.addEventListener("click", function (e) {
                e.stopPropagation();
                const isOpening = !mobileMenu.classList.contains("active");
                
                mobileMenu.classList.toggle("active");
                document.body.classList.toggle("menu-open", isOpening);
                document.body.classList.toggle("menu-backdrop", isOpening);
            });

            // Закрытие меню при клике вне его области
            document.addEventListener("click", function (e) {
                if (
                    !mobileMenu.contains(e.target) &&
                    !menuButton.contains(e.target) &&
                    mobileMenu.classList.contains("active")
                ) {
                    mobileMenu.classList.remove("active");
                    document.body.classList.remove("menu-open");
                    document.body.classList.remove("menu-backdrop");
                }
            });

            // Закрытие меню при клике на ссылки
            document.querySelectorAll(".nav_mobile-link:not(.nav_mobile-links_submenu), .header__sublink-mobile").forEach(link => {
                link.addEventListener("click", function() {
                    mobileMenu.classList.remove("active");
                    document.body.classList.remove("menu-open");
                    document.body.classList.remove("menu-backdrop");
                });
            });
        }

        // Обработчик для выпадающего меню "Продукты" в мобильной версии
        const productsButtons = document.querySelectorAll(".nav_mobile-links_submenu");
        if (productsButtons.length) {
            productsButtons.forEach(button => {
                button.addEventListener("click", function (e) {
                    // Предотвращаем закрытие меню при клике на подменю
                    e.stopPropagation();
                    
                    // Переключаем состояние только для текущего подменю
                    !this.classList.contains("open");
                    this.classList.toggle("open");
                    
                    // Закрываем другие открытые подменю
                    productsButtons.forEach(otherButton => {
                        if (otherButton !== this && otherButton.classList.contains("open")) {
                            otherButton.classList.remove("open");
                        }
                    });
                });
            });
        }
    });

})();
//# sourceMappingURL=main.js.map

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsic3JjL2pzL2NvbW1vbi9wcmljZS5qcyIsInNyYy9qcy9jb21tb24vZmVhdHVyZXMuanMiLCJzcmMvanMvY29tbW9uL3F1ZXN0aW9ucy5qcyIsInNyYy9qcy9jb21tb24vaGVhZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yYW5nZS1pbnB1dCcpLmZvckVhY2goKHJhbmdlSW5wdXQpID0+IHtcbiAgICBjb25zdCByYW5nZUNvbnRhaW5lciA9IHJhbmdlSW5wdXQuY2xvc2VzdCgnLnJhbmdlJyk7XG4gICAgY29uc3QgbWFya3MgPSByYW5nZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucmFuZ2UtbWFyaycpO1xuXG4gICAgZnVuY3Rpb24gdXBkYXRlTWFya3ModmFsdWUpIHtcbiAgICAgICAgbWFya3MuZm9yRWFjaCgobWFyaywgaSkgPT4ge1xuICAgICAgICAgICAgbWFyay5zdHlsZS52aXNpYmlsaXR5ID0gKGkgPT0gdmFsdWUpID8gJ2hpZGRlbicgOiAndmlzaWJsZSc7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJhbmdlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xuICAgICAgICB1cGRhdGVNYXJrcygrZS50YXJnZXQudmFsdWUpO1xuICAgIH0pO1xuXG4gICAgdXBkYXRlTWFya3MoK3JhbmdlSW5wdXQudmFsdWUpO1xufSk7XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxjdWxhdG9yX19wZXJpb2Qtc3dpdGNoZXInKS5mb3JFYWNoKChzd2l0Y2hlcikgPT4ge1xuICAgIGNvbnN0IGxlZnQgPSBzd2l0Y2hlci5xdWVyeVNlbGVjdG9yKCcuc3dpdGNoZXJfX2xlZnQnKTtcbiAgICBjb25zdCByaWdodCA9IHN3aXRjaGVyLnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2hlcl9fcmlnaHQnKTtcblxuICAgIGxlZnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZXJfX2FjdGl2ZScpO1xuICAgICAgICByaWdodC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlcl9fYWN0aXZlJyk7XG4gICAgfSk7XG5cbiAgICByaWdodC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgcmlnaHQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZXJfX2FjdGl2ZScpO1xuICAgICAgICBsZWZ0LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVyX19hY3RpdmUnKTtcbiAgICB9KTtcbn0pO1xuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICBjb25zdCB1c2VyUmFuZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGN1bGF0b3JfX3VzZXJzLXJhbmdlXCIpO1xuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FsY3VsYXRvcl9fdXNlcnMtY291bnRcIik7XG4gICAgY29uc3QgcmVnaW9uUmFuZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGN1bGF0b3JfX3JlZ2lvbi1yYW5nZVwiKTtcbiAgICBjb25zdCByZWdpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FsY3VsYXRvcl9fcmVnaW9uLWNvdW50XCIpO1xuICAgIGNvbnN0IHJlc2V0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYWxjdWxhdG9yX19yZXNldFwiKTtcblxuICAgIGNvbnN0IHVzZXJWYWx1ZXMgPSBbMTAsIDIwLCAzMCwgNDAsIDUwLCAxMDBdO1xuICAgIGNvbnN0IHJlZ2lvblZhbHVlcyA9IFsxLCAyLCAzLCA0LCA1LCAxMF07XG5cbiAgICBjb25zdCBiYXNlUHJpY2VzID0ge1xuICAgICAgICBiYXNlOiAxNTAwMCxcbiAgICAgICAgc3RhbmRhcmQ6IDI1MDAwLFxuICAgICAgICBwcm9maTogMzUwMDBcbiAgICB9O1xuXG4gICAgY29uc3QgY29zdFRpdGxlcyA9IHtcbiAgICAgICAgYmFzZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3N0c19fYmFzZSAuY29zdHNfX3RpdGxlICsgLmNvc3RzX19tYWluLWluZm8gKyBoNVwiKSxcbiAgICAgICAgc3RhbmRhcmQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29zdHNfX3N0YW5kYXJ0IC5jb3N0c19fdGl0bGUgKyAuY29zdHNfX21haW4taW5mbyArIGg1XCIpLFxuICAgICAgICBwcm9maTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3N0c19fcHJvZmkgLmNvc3RzX190aXRsZSArIC5jb3N0c19fbWFpbi1pbmZvICsgaDVcIilcbiAgICB9O1xuXG4gICAgY29uc3QgdXNlckNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb3N0c19fYmxvY2sgLmNvc3RzX19tYWluLWluZm8gLmNvc3RzX19pdGVtOm50aC1jaGlsZCgxKSAuY29zdHNfX2l0ZW0tdmFsdWVcIik7XG4gICAgY29uc3QgcmVnaW9uQ2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvc3RzX19ibG9jayAuY29zdHNfX21haW4taW5mbyAuY29zdHNfX2l0ZW06bnRoLWNoaWxkKDIpIC5jb3N0c19faXRlbS12YWx1ZVwiKTtcblxuICAgIGNvbnN0IGRlZmF1bHRVc2VycyA9IHVzZXJWYWx1ZXNbMF07XG4gICAgY29uc3QgZGVmYXVsdFJlZ2lvbnMgPSByZWdpb25WYWx1ZXNbMF07XG4gICAgbGV0IGlzWWVhcmx5ID0gZmFsc2U7XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVNYXJrcyhyYW5nZUlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJhbmdlQ29udGFpbmVyID0gcmFuZ2VJbnB1dC5jbG9zZXN0KCcucmFuZ2UnKTtcbiAgICAgICAgY29uc3QgbWFya3MgPSByYW5nZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucmFuZ2UtbWFyaycpO1xuICAgICAgICBtYXJrcy5mb3JFYWNoKChtYXJrLCBpKSA9PiB7XG4gICAgICAgICAgICBtYXJrLnN0eWxlLnZpc2liaWxpdHkgPSAoaSA9PSArcmFuZ2VJbnB1dC52YWx1ZSkgPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlQ2FyZHMobm9kZUxpc3QsIHZhbHVlKSB7XG4gICAgICAgIG5vZGVMaXN0LmZvckVhY2goZWwgPT4gZWwudGV4dENvbnRlbnQgPSB2YWx1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlUHJpY2VzKCkge1xuICAgICAgICBjb25zdCB1c2VycyA9IHBhcnNlSW50KHVzZXJJbnB1dC52YWx1ZSwgMTApO1xuICAgICAgICBjb25zdCByZWdpb25zID0gcGFyc2VJbnQocmVnaW9uSW5wdXQudmFsdWUsIDEwKTtcblxuICAgICAgICBPYmplY3Qua2V5cyhiYXNlUHJpY2VzKS5mb3JFYWNoKHBsYW4gPT4ge1xuICAgICAgICAgICAgbGV0IHByaWNlID0gYmFzZVByaWNlc1twbGFuXTtcblxuICAgICAgICAgICAgaWYgKHVzZXJzID4gMTApIHtcbiAgICAgICAgICAgICAgICBwcmljZSArPSBNYXRoLmZsb29yKCh1c2VycyAtIDEwKSAvIDEwKSAqIDEwMDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZWdpb25zID4gMSkge1xuICAgICAgICAgICAgICAgIHByaWNlICs9IChyZWdpb25zIC0gMSkgKiAxMDAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNZZWFybHkpIHtcbiAgICAgICAgICAgICAgICBwcmljZSA9IHByaWNlICogMTIgKiAwLjc7XG4gICAgICAgICAgICAgICAgY29zdFRpdGxlc1twbGFuXS50ZXh0Q29udGVudCA9IGAke3ByaWNlLnRvTG9jYWxlU3RyaW5nKFwicnUtUlVcIil9IOKCvS/Qs9C+0LRgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb3N0VGl0bGVzW3BsYW5dLnRleHRDb250ZW50ID0gYCR7cHJpY2UudG9Mb2NhbGVTdHJpbmcoXCJydS1SVVwiKX0g4oK9L9C80LXRgdGP0YZgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVSZXNldFN0YXRlKCkge1xuICAgICAgICByZXNldEJ1dHRvbi5kaXNhYmxlZCA9XG4gICAgICAgICAgICArdXNlcklucHV0LnZhbHVlID09PSBkZWZhdWx0VXNlcnMgJiZcbiAgICAgICAgICAgICtyZWdpb25JbnB1dC52YWx1ZSA9PT0gZGVmYXVsdFJlZ2lvbnMgJiZcbiAgICAgICAgICAgICFpc1llYXJseTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzeW5jU2xpZGVyKGlucHV0LCBzbGlkZXIsIHZhbHVlc0FycmF5KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKTtcbiAgICAgICAgbGV0IGluZGV4ID0gdmFsdWVzQXJyYXkuaW5kZXhPZih2YWx1ZSk7XG5cbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlIDwgdmFsdWVzQXJyYXlbMF0pIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID4gdmFsdWVzQXJyYXlbdmFsdWVzQXJyYXkubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHZhbHVlc0FycmF5Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gdmFsdWVzQXJyYXkuZmluZEluZGV4KHYgPT4gdiA+PSB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzbGlkZXIudmFsdWUgPSBpbmRleDtcbiAgICAgICAgdXBkYXRlTWFya3Moc2xpZGVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVTbGlkZXIoc2xpZGVyLCBpbnB1dCwgdmFsdWVzQXJyYXksIGNhcmROb2Rlcykge1xuICAgICAgICBzbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoc2xpZGVyLnZhbHVlLCAxMCk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc0FycmF5W2luZGV4XTtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB1cGRhdGVDYXJkcyhjYXJkTm9kZXMsIHZhbHVlKTtcbiAgICAgICAgICAgIHVwZGF0ZU1hcmtzKHNsaWRlcik7XG4gICAgICAgICAgICB1cGRhdGVQcmljZXMoKTtcbiAgICAgICAgICAgIHVwZGF0ZVJlc2V0U3RhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlSW5wdXQoaW5wdXQsIHNsaWRlciwgdmFsdWVzQXJyYXksIGNhcmROb2Rlcykge1xuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChpbnB1dC52YWx1ZSwgMTApO1xuICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVDYXJkcyhjYXJkTm9kZXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBzeW5jU2xpZGVyKGlucHV0LCBzbGlkZXIsIHZhbHVlc0FycmF5KTtcbiAgICAgICAgICAgICAgICB1cGRhdGVQcmljZXMoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVSZXNldFN0YXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlc2V0KCkge1xuICAgICAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdXNlclJhbmdlLnZhbHVlID0gMDtcbiAgICAgICAgICAgIHJlZ2lvblJhbmdlLnZhbHVlID0gMDtcbiAgICAgICAgICAgIHVzZXJJbnB1dC52YWx1ZSA9IGRlZmF1bHRVc2VycztcbiAgICAgICAgICAgIHJlZ2lvbklucHV0LnZhbHVlID0gZGVmYXVsdFJlZ2lvbnM7XG4gICAgICAgICAgICBpc1llYXJseSA9IGZhbHNlO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zd2l0Y2hlcl9fbGVmdFwiKS5jbGFzc0xpc3QuYWRkKFwic3dpdGNoZXJfX2FjdGl2ZVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3dpdGNoZXJfX3JpZ2h0XCIpLmNsYXNzTGlzdC5yZW1vdmUoXCJzd2l0Y2hlcl9fYWN0aXZlXCIpO1xuICAgICAgICAgICAgdXBkYXRlQ2FyZHModXNlckNhcmRzLCBkZWZhdWx0VXNlcnMpO1xuICAgICAgICAgICAgdXBkYXRlQ2FyZHMocmVnaW9uQ2FyZHMsIGRlZmF1bHRSZWdpb25zKTtcbiAgICAgICAgICAgIHVwZGF0ZU1hcmtzKHVzZXJSYW5nZSk7XG4gICAgICAgICAgICB1cGRhdGVNYXJrcyhyZWdpb25SYW5nZSk7XG4gICAgICAgICAgICB1cGRhdGVQcmljZXMoKTtcbiAgICAgICAgICAgIHJlc2V0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGN1bGF0b3JfX3BlcmlvZC1zd2l0Y2hlcicpLmZvckVhY2goKHN3aXRjaGVyKSA9PiB7XG4gICAgICAgIGNvbnN0IGxlZnQgPSBzd2l0Y2hlci5xdWVyeVNlbGVjdG9yKCcuc3dpdGNoZXJfX2xlZnQnKTtcbiAgICAgICAgY29uc3QgcmlnaHQgPSBzd2l0Y2hlci5xdWVyeVNlbGVjdG9yKCcuc3dpdGNoZXJfX3JpZ2h0Jyk7XG5cbiAgICAgICAgbGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZXJfX2FjdGl2ZScpO1xuICAgICAgICAgICAgcmlnaHQuY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZXJfX2FjdGl2ZScpO1xuICAgICAgICAgICAgaXNZZWFybHkgPSBmYWxzZTtcbiAgICAgICAgICAgIHVwZGF0ZVByaWNlcygpO1xuICAgICAgICAgICAgdXBkYXRlUmVzZXRTdGF0ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICByaWdodC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHJpZ2h0LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVyX19hY3RpdmUnKTtcbiAgICAgICAgICAgIGxlZnQuY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZXJfX2FjdGl2ZScpO1xuICAgICAgICAgICAgaXNZZWFybHkgPSB0cnVlO1xuICAgICAgICAgICAgdXBkYXRlUHJpY2VzKCk7XG4gICAgICAgICAgICB1cGRhdGVSZXNldFN0YXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gZW5mb3JjZUxpbWl0cyhpbnB1dCwgbWluLCBtYXgsIHNsaWRlciwgdmFsdWVzQXJyYXkpIHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gaW5wdXQudmFsdWUucmVwbGFjZSgvXFxEL2csIFwiXCIpO1xuXG4gICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IG1pbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA8IG1pbikgdmFsdWUgPSBtaW47XG4gICAgICAgICAgICBpZiAodmFsdWUgPiBtYXgpIHZhbHVlID0gbWF4O1xuXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgc3luY1NsaWRlcihpbnB1dCwgc2xpZGVyLCB2YWx1ZXNBcnJheSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgZW5mb3JjZUxpbWl0cyh1c2VySW5wdXQsIDEsIDEwMDAsIHVzZXJSYW5nZSwgdXNlclZhbHVlcyk7XG4gICAgZW5mb3JjZUxpbWl0cyhyZWdpb25JbnB1dCwgMSwgMTAwLCByZWdpb25SYW5nZSwgcmVnaW9uVmFsdWVzKTtcbiAgICB1cGRhdGVNYXJrcyh1c2VyUmFuZ2UpO1xuICAgIHVwZGF0ZU1hcmtzKHJlZ2lvblJhbmdlKTtcbiAgICB1cGRhdGVDYXJkcyh1c2VyQ2FyZHMsIGRlZmF1bHRVc2Vycyk7XG4gICAgdXBkYXRlQ2FyZHMocmVnaW9uQ2FyZHMsIGRlZmF1bHRSZWdpb25zKTtcbiAgICB1cGRhdGVQcmljZXMoKTtcblxuICAgIGhhbmRsZVNsaWRlcih1c2VyUmFuZ2UsIHVzZXJJbnB1dCwgdXNlclZhbHVlcywgdXNlckNhcmRzKTtcbiAgICBoYW5kbGVTbGlkZXIocmVnaW9uUmFuZ2UsIHJlZ2lvbklucHV0LCByZWdpb25WYWx1ZXMsIHJlZ2lvbkNhcmRzKTtcbiAgICBoYW5kbGVJbnB1dCh1c2VySW5wdXQsIHVzZXJSYW5nZSwgdXNlclZhbHVlcywgdXNlckNhcmRzKTtcbiAgICBoYW5kbGVJbnB1dChyZWdpb25JbnB1dCwgcmVnaW9uUmFuZ2UsIHJlZ2lvblZhbHVlcywgcmVnaW9uQ2FyZHMpO1xuICAgIGhhbmRsZVJlc2V0KCk7XG59KTtcblxuXG5cbiIsIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBhbGxGZWF0dXJlQmxvY2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZlYXR1cmVzX19ibG9jaycpO1xubGV0IGxhc3RTY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XG5cbmFsbEZlYXR1cmVCbG9ja3MuZm9yRWFjaCgoYmxvY2spID0+IHtcbiAgICBjb25zdCBkZXNrdG9wQ2FyZHMgPSBibG9jay5xdWVyeVNlbGVjdG9yQWxsKCcuZmVhdHVyZXNfX2NhcmRzX2Rlc2t0b3AgLmZlYXR1cmVzX19jYXJkJyk7XG4gICAgY29uc3QgbW9iaWxlQ2FyZHMgPSBibG9jay5xdWVyeVNlbGVjdG9yQWxsKCcuZmVhdHVyZXNfX2NhcmRzX21vYmlsZSAuZmVhdHVyZXNfX2NhcmQnKTtcblxuICAgIGlmICghZGVza3RvcENhcmRzLmxlbmd0aCAmJiAhbW9iaWxlQ2FyZHMubGVuZ3RoKSByZXR1cm47XG5cbiAgICBjb25zdCBtb2JpbGVDYXJkc0NvbnRhaW5lciA9IGJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5mZWF0dXJlc19fY2FyZHNfbW9iaWxlJyk7XG5cbiAgICBsZXQgY3VycmVudENhcmRJbmRleCA9IDA7XG4gICAgbGV0IHNjcm9sbExvY2tlZCA9IGZhbHNlO1xuICAgIGxldCBhbGxvd1Njcm9sbCA9IGZhbHNlO1xuXG4gICAgY29uc3QgY2FyZHNMZW5ndGggPSBkZXNrdG9wQ2FyZHMubGVuZ3RoIHx8IG1vYmlsZUNhcmRzLmxlbmd0aDtcblxuICAgIGNvbnN0IGFjdGl2YXRlQ2FyZCA9IChpbmRleE9yRWxlbWVudCkgPT4ge1xuICAgICAgICBsZXQgaW5kZXg7XG4gICAgICAgIGlmICh0eXBlb2YgaW5kZXhPckVsZW1lbnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBpbmRleCA9IGluZGV4T3JFbGVtZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5kZXggPSBbLi4uZGVza3RvcENhcmRzXS5pbmRleE9mKGluZGV4T3JFbGVtZW50KTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IFsuLi5tb2JpbGVDYXJkc10uaW5kZXhPZihpbmRleE9yRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjdXJyZW50Q2FyZEluZGV4ID0gaW5kZXg7XG5cbiAgICAgICAgZGVza3RvcENhcmRzLmZvckVhY2goKGMsIGkpID0+IHtcbiAgICAgICAgICAgIGMuY2xhc3NMaXN0LnRvZ2dsZSgnZmVhdHVyZXNfX2NhcmRfYWN0aXZlJywgaSA9PT0gaW5kZXgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBtb2JpbGVDYXJkcy5mb3JFYWNoKChjLCBpKSA9PiB7XG4gICAgICAgICAgICBjLmNsYXNzTGlzdC50b2dnbGUoJ2ZlYXR1cmVzX19jYXJkX2FjdGl2ZScsIGkgPT09IGluZGV4KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWN0aXZlSWQgPSBkZXNrdG9wQ2FyZHNbaW5kZXhdPy5kYXRhc2V0LmlkIHx8IG1vYmlsZUNhcmRzW2luZGV4XT8uZGF0YXNldC5pZDtcblxuICAgICAgICBibG9jay5xdWVyeVNlbGVjdG9yQWxsKCcuZmVhdHVyZXNfX2NvbnRlbnQtaXRlbScpLmZvckVhY2goaW1nID0+IHtcbiAgICAgICAgICAgIGltZy5jbGFzc0xpc3QudG9nZ2xlKCdhY3RpdmUnLCBpbWcuZGF0YXNldC5pZCA9PT0gYWN0aXZlSWQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAobW9iaWxlQ2FyZHNDb250YWluZXIgJiYgbW9iaWxlQ2FyZHNbaW5kZXhdKSB7XG4gICAgICAgICAgICBtb2JpbGVDYXJkc1tpbmRleF0uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGlubGluZTogJ2NlbnRlcicgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKG1vYmlsZUNhcmRzQ29udGFpbmVyICYmIG1vYmlsZUNhcmRzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBsYXN0Q2FyZCA9IG1vYmlsZUNhcmRzW21vYmlsZUNhcmRzLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGNvbnN0IG1vYmlsZVNjcm9sbE9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbnRyeSA9IGVudHJpZXNbMF07XG4gICAgICAgICAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICAgICAgICBhbGxvd1Njcm9sbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZmVhdHVyZXNfX2Jsb2NrX2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICByb290OiBtb2JpbGVDYXJkc0NvbnRhaW5lcixcbiAgICAgICAgICAgIHRocmVzaG9sZDogMC45LFxuICAgICAgICB9KTtcblxuICAgICAgICBtb2JpbGVTY3JvbGxPYnNlcnZlci5vYnNlcnZlKGxhc3RDYXJkKTtcbiAgICB9XG5cbiAgICBjb25zdCBzY3JvbGxIYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGFsbG93U2Nyb2xsIHx8IHNjcm9sbExvY2tlZCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGJsb2NrUmVjdCA9IGJsb2NrLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIGNvbnN0IHNjcm9sbGluZ0Rvd24gPSBlLmRlbHRhWSA+IDA7XG4gICAgICAgIGlmICghc2Nyb2xsaW5nRG93biAmJiBibG9ja1JlY3QudG9wID4gd2luZG93LmlubmVySGVpZ2h0IC0gMTAwKSB7XG4gICAgICAgICAgICBhbGxvd1Njcm9sbCA9IHRydWU7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBzY3JvbGxIYW5kbGVyLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzY3JvbGxMb2NrZWQgPSB0cnVlO1xuXG4gICAgICAgIGxldCBuZXh0SW5kZXggPSBzY3JvbGxpbmdEb3duXG4gICAgICAgICAgICA/IE1hdGgubWluKGNhcmRzTGVuZ3RoIC0gMSwgY3VycmVudENhcmRJbmRleCArIDEpXG4gICAgICAgICAgICA6IE1hdGgubWF4KDAsIGN1cnJlbnRDYXJkSW5kZXggLSAxKTtcblxuICAgICAgICBhY3RpdmF0ZUNhcmQobmV4dEluZGV4KTtcblxuICAgICAgICBjb25zdCBpc0xhc3QgPSBzY3JvbGxpbmdEb3duICYmIG5leHRJbmRleCA9PT0gY2FyZHNMZW5ndGggLSAxO1xuICAgICAgICBjb25zdCBpc0ZpcnN0ID0gIXNjcm9sbGluZ0Rvd24gJiYgbmV4dEluZGV4ID09PSAwO1xuXG4gICAgICAgIGlmIChpc0xhc3QgfHwgaXNGaXJzdCkge1xuICAgICAgICAgICAgYWxsb3dTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgc2Nyb2xsSGFuZGxlciwgeyBwYXNzaXZlOiBmYWxzZSB9KTtcblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZmVhdHVyZXNfX2Jsb2NrX2FjdGl2ZScpO1xuICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgc2Nyb2xsTG9ja2VkID0gZmFsc2U7XG4gICAgICAgIH0sIDQwMCk7XG4gICAgfTtcblxuICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKFxuICAgICAgICAoZW50cmllcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZW50cnkgPSBlbnRyaWVzWzBdO1xuICAgICAgICAgICAgY29uc3QgaXNWaXNpYmxlID0gZW50cnkuaXNJbnRlcnNlY3RpbmcgJiYgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiAwLjU7XG5cbiAgICAgICAgICAgIGlmICghaXNWaXNpYmxlKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxZID0gd2luZG93LnNjcm9sbFk7XG4gICAgICAgICAgICBjb25zdCBzY3JvbGxpbmdEb3duID0gY3VycmVudFNjcm9sbFkgPiBsYXN0U2Nyb2xsWTtcbiAgICAgICAgICAgIGxhc3RTY3JvbGxZID0gY3VycmVudFNjcm9sbFk7XG5cbiAgICAgICAgICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoJ2ZlYXR1cmVzX19ibG9ja19hY3RpdmUnKTtcblxuICAgICAgICAgICAgY3VycmVudENhcmRJbmRleCA9IHNjcm9sbGluZ0Rvd24gPyAwIDogY2FyZHNMZW5ndGggLSAxO1xuICAgICAgICAgICAgYWN0aXZhdGVDYXJkKGN1cnJlbnRDYXJkSW5kZXgpO1xuXG4gICAgICAgICAgICBhbGxvd1Njcm9sbCA9IGZhbHNlO1xuICAgICAgICAgICAgc2Nyb2xsTG9ja2VkID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd3aGVlbCcsIHNjcm9sbEhhbmRsZXIsIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBzY3JvbGxIYW5kbGVyLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICB9LFxuICAgICAgICB7IHRocmVzaG9sZDogMC41IH1cbiAgICApO1xuXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShibG9jayk7XG59KTtcbiIsImRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWVzdGlvbnNfX2l0ZW0nKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgIGNvbnN0IGluZm8gPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5xdWVzdGlvbnNfX2l0ZW0taW5mbycpO1xuICAgIGNvbnN0IGltZyA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLnF1ZXN0aW9uc19faXRlbS1pbWcnKTtcblxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnYScpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBpdGVtLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XG5cbiAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgaW5mby5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xuICAgICAgICAgICAgaW1nLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMGRlZyknO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGluZm8uc3R5bGUubWF4SGVpZ2h0ID0gaW5mby5zY3JvbGxIZWlnaHQgKyAxNiArICdweCc7XG4gICAgICAgICAgICBpbWcuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgxODBkZWcpJztcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG4iLCIvLyDQk9C70LDQstC90L7QtSDQvNC10L3RjlxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuLWRyb3Bkb3duLW1lbnVcIik7XG4gICAgY29uc3QgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHJvcGRvd24tbWVudVwiKTtcblxuICAgIGlmIChidG4gJiYgbWVudSkge1xuICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIWJ0bi5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuLy8g0JzQvtCx0LjQu9GM0L3QvtC1INC80LXQvdGOXG4vLyDQnNC+0LHQuNC70YzQvdC+0LUg0LzQtdC90Y5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBtZW51QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfbW9iaWxlIC5idXR0b24taWNvblwiKTtcbiAgICBjb25zdCBtb2JpbGVNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXZfbW9iaWxlLWxpbmtzXCIpO1xuXG4gICAgaWYgKG1lbnVCdXR0b24gJiYgbW9iaWxlTWVudSkge1xuICAgICAgICBtZW51QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGNvbnN0IGlzT3BlbmluZyA9ICFtb2JpbGVNZW51LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9iaWxlTWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwibWVudS1vcGVuXCIsIGlzT3BlbmluZyk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJtZW51LWJhY2tkcm9wXCIsIGlzT3BlbmluZyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vINCX0LDQutGA0YvRgtC40LUg0LzQtdC90Y4g0L/RgNC4INC60LvQuNC60LUg0LLQvdC1INC10LPQviDQvtCx0LvQsNGB0YLQuFxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhbW9iaWxlTWVudS5jb250YWlucyhlLnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICAhbWVudUJ1dHRvbi5jb250YWlucyhlLnRhcmdldCkgJiZcbiAgICAgICAgICAgICAgICBtb2JpbGVNZW51LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbW9iaWxlTWVudS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcIm1lbnUtb3BlblwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51LWJhY2tkcm9wXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDQl9Cw0LrRgNGL0YLQuNC1INC80LXQvdGOINC/0YDQuCDQutC70LjQutC1INC90LAg0YHRgdGL0LvQutC4XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2X21vYmlsZS1saW5rOm5vdCgubmF2X21vYmlsZS1saW5rc19zdWJtZW51KSwgLmhlYWRlcl9fc3VibGluay1tb2JpbGVcIikuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIG1vYmlsZU1lbnUuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51LW9wZW5cIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibWVudS1iYWNrZHJvcFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQtNC70Y8g0LLRi9C/0LDQtNCw0Y7RidC10LPQviDQvNC10L3RjiBcItCf0YDQvtC00YPQutGC0YtcIiDQsiDQvNC+0LHQuNC70YzQvdC+0Lkg0LLQtdGA0YHQuNC4XG4gICAgY29uc3QgcHJvZHVjdHNCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfbW9iaWxlLWxpbmtzX3N1Ym1lbnVcIik7XG4gICAgaWYgKHByb2R1Y3RzQnV0dG9ucy5sZW5ndGgpIHtcbiAgICAgICAgcHJvZHVjdHNCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyDQn9GA0LXQtNC+0YLQstGA0LDRidCw0LXQvCDQt9Cw0LrRgNGL0YLQuNC1INC80LXQvdGOINC/0YDQuCDQutC70LjQutC1INC90LAg0L/QvtC00LzQtdC90Y5cbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vINCf0LXRgNC10LrQu9GO0YfQsNC10Lwg0YHQvtGB0YLQvtGP0L3QuNC1INGC0L7Qu9GM0LrQviDQtNC70Y8g0YLQtdC60YPRidC10LPQviDQv9C+0LTQvNC10L3RjlxuICAgICAgICAgICAgICAgIGNvbnN0IGlzT3BlbmluZyA9ICF0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcIm9wZW5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwib3BlblwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDQl9Cw0LrRgNGL0LLQsNC10Lwg0LTRgNGD0LPQuNC1INC+0YLQutGA0YvRgtGL0LUg0L/QvtC00LzQtdC90Y5cbiAgICAgICAgICAgICAgICBwcm9kdWN0c0J1dHRvbnMuZm9yRWFjaChvdGhlckJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdGhlckJ1dHRvbiAhPT0gdGhpcyAmJiBvdGhlckJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJvcGVuXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdGhlckJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwib3BlblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztJQUFBLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxVQUFVLEtBQUs7SUFDbEUsSUFBSSxNQUFNLGNBQWMsR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3hELElBQUksTUFBTSxLQUFLLEdBQUcsY0FBYyxDQUFDLGdCQUFnQixDQUFDLGFBQWEsQ0FBQyxDQUFDO0FBQ2pFO0lBQ0EsSUFBSSxTQUFTLFdBQVcsQ0FBQyxLQUFLLEVBQUU7SUFDaEMsUUFBUSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSztJQUNuQyxZQUFZLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxRQUFRLEdBQUcsU0FBUyxDQUFDO0lBQ3hFLFNBQVMsQ0FBQyxDQUFDO0lB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{"version":3,"file":"main.js","sources":["src/js/common/price.js","src/js/common/features.js","src/js/common/questions.js","src/js/common/header.js"],"sourcesContent":["document.querySelectorAll('.range-input').forEach((rangeInput) => {\n    const rangeContainer = rangeInput.closest('.range');\n    const marks = rangeContainer.querySelectorAll('.range-mark');\n\n    function updateMarks(value) {\n        marks.forEach((mark, i) => {\n            mark.style.visibility = (i == value) ? 'hidden' : 'visible';\n        });\n    }\n\n    rangeInput.addEventListener('input', (e) => {\n        updateMarks(+e.target.value);\n    });\n\n    updateMarks(+rangeInput.value);\n});\n\ndocument.querySelectorAll('.calculator__period-switcher').forEach((switcher) => {\n    const left = switcher.querySelector('.switcher__left');\n    const right = switcher.querySelector('.switcher__right');\n\n    left.addEventListener('click', () => {\n        left.classList.add('switcher__active');\n        right.classList.remove('switcher__active');\n    });\n\n    right.addEventListener('click', () => {\n        right.classList.add('switcher__active');\n        left.classList.remove('switcher__active');\n    });\n});\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const userRange = document.getElementById(\"calculator__users-range\");\n    const userInput = document.querySelector(\".calculator__users-count\");\n    const regionRange = document.getElementById(\"calculator__region-range\");\n    const regionInput = document.querySelector(\".calculator__region-count\");\n    const resetButton = document.querySelector(\".calculator__reset\");\n\n    const userValues = [10, 20, 30, 40, 50, 100];\n    const regionValues = [1, 2, 3, 4, 5, 10];\n\n    const basePrices = {\n        base: 15000,\n        standard: 25000,\n        profi: 35000\n    };\n\n    const costTitles = {\n        base: document.querySelector(\".costs__base .costs__title + .costs__main-info + h5\"),\n        standard: document.querySelector(\".costs__standart .costs__title + .costs__main-info + h5\"),\n        profi: document.querySelector(\".costs__profi .costs__title + .costs__main-info + h5\")\n    };\n\n    const userCards = document.querySelectorAll(\".costs__block .costs__main-info .costs__item:nth-child(1) .costs__item-value\");\n    const regionCards = document.querySelectorAll(\".costs__block .costs__main-info .costs__item:nth-child(2) .costs__item-value\");\n\n    const defaultUsers = userValues[0];\n    const defaultRegions = regionValues[0];\n    let isYearly = false;\n\n    function updateMarks(rangeInput) {\n        const rangeContainer = rangeInput.closest('.range');\n        const marks = rangeContainer.querySelectorAll('.range-mark');\n        marks.forEach((mark, i) => {\n            mark.style.visibility = (i == +rangeInput.value) ? 'hidden' : 'visible';\n        });\n    }\n\n    function updateCards(nodeList, value) {\n        nodeList.forEach(el => el.textContent = value);\n    }\n\n    function updatePrices() {\n        const users = parseInt(userInput.value, 10);\n        const regions = parseInt(regionInput.value, 10);\n\n        Object.keys(basePrices).forEach(plan => {\n            let price = basePrices[plan];\n\n            if (users > 10) {\n                price += Math.floor((users - 10) / 10) * 1000;\n            }\n\n            if (regions > 1) {\n                price += (regions - 1) * 1000;\n            }\n\n            if (isYearly) {\n                price = price * 12 * 0.7;\n                costTitles[plan].textContent = `${price.toLocaleString(\"ru-RU\")} ₽/год`;\n            } else {\n                costTitles[plan].textContent = `${price.toLocaleString(\"ru-RU\")} ₽/месяц`;\n            }\n        });\n    }\n\n    function updateResetState() {\n        resetButton.disabled =\n            +userInput.value === defaultUsers &&\n            +regionInput.value === defaultRegions &&\n            !isYearly;\n    }\n\n    function syncSlider(input, slider, valuesArray) {\n        const value = parseInt(input.value, 10);\n        let index = valuesArray.indexOf(value);\n\n        if (index === -1) {\n            if (value < valuesArray[0]) {\n                index = 0;\n            } else if (value > valuesArray[valuesArray.length - 1]) {\n                index = valuesArray.length - 1;\n            } else {\n                index = valuesArray.findIndex(v => v >= value);\n            }\n        }\n\n        slider.value = index;\n        updateMarks(slider);\n    }\n\n    function handleSlider(slider, input, valuesArray, cardNodes) {\n        slider.addEventListener(\"input\", () => {\n            const index = parseInt(slider.value, 10);\n            const value = valuesArray[index];\n            input.value = value;\n            updateCards(cardNodes, value);\n            updateMarks(slider);\n            updatePrices();\n            updateResetState();\n        });\n    }\n\n    function handleInput(input, slider, valuesArray, cardNodes) {\n        input.addEventListener(\"input\", () => {\n            const value = parseInt(input.value, 10);\n            if (!isNaN(value)) {\n                updateCards(cardNodes, value);\n                syncSlider(input, slider, valuesArray);\n                updatePrices();\n                updateResetState();\n            }\n        });\n    }\n\n    function handleReset() {\n        resetButton.addEventListener(\"click\", () => {\n            userRange.value = 0;\n            regionRange.value = 0;\n            userInput.value = defaultUsers;\n            regionInput.value = defaultRegions;\n            isYearly = false;\n            document.querySelector(\".switcher__left\").classList.add(\"switcher__active\");\n            document.querySelector(\".switcher__right\").classList.remove(\"switcher__active\");\n            updateCards(userCards, defaultUsers);\n            updateCards(regionCards, defaultRegions);\n            updateMarks(userRange);\n            updateMarks(regionRange);\n            updatePrices();\n            resetButton.disabled = true;\n        });\n    }\n\n    document.querySelectorAll('.calculator__period-switcher').forEach((switcher) => {\n        const left = switcher.querySelector('.switcher__left');\n        const right = switcher.querySelector('.switcher__right');\n\n        left.addEventListener('click', () => {\n            left.classList.add('switcher__active');\n            right.classList.remove('switcher__active');\n            isYearly = false;\n            updatePrices();\n            updateResetState();\n        });\n\n        right.addEventListener('click', () => {\n            right.classList.add('switcher__active');\n            left.classList.remove('switcher__active');\n            isYearly = true;\n            updatePrices();\n            updateResetState();\n        });\n    });\n\n    function enforceLimits(input, min, max, slider, valuesArray) {\n        input.addEventListener(\"input\", () => {\n            input.value = input.value.replace(/\\D/g, \"\");\n\n            if (input.value === \"\") {\n                input.value = min;\n            }\n\n            let value = parseInt(input.value, 10);\n            if (value < min) value = min;\n            if (value > max) value = max;\n\n            input.value = value;\n            syncSlider(input, slider, valuesArray);\n        });\n    }\n\n\n    enforceLimits(userInput, 1, 1000, userRange, userValues);\n    enforceLimits(regionInput, 1, 100, regionRange, regionValues);\n    updateMarks(userRange);\n    updateMarks(regionRange);\n    updateCards(userCards, defaultUsers);\n    updateCards(regionCards, defaultRegions);\n    updatePrices();\n\n    handleSlider(userRange, userInput, userValues, userCards);\n    handleSlider(regionRange, regionInput, regionValues, regionCards);\n    handleInput(userInput, userRange, userValues, userCards);\n    handleInput(regionInput, regionRange, regionValues, regionCards);\n    handleReset();\n});\n\n\n\n","\"use strict\";\n\nconst allFeatureBlocks = document.querySelectorAll('.features__block');\nlet lastScrollY = window.scrollY;\n\nallFeatureBlocks.forEach((block) => {\n    const desktopCards = block.querySelectorAll('.features__cards_desktop .features__card');\n    const mobileCards = block.querySelectorAll('.features__cards_mobile .features__card');\n\n    if (!desktopCards.length && !mobileCards.length) return;\n\n    const mobileCardsContainer = block.querySelector('.features__cards_mobile');\n\n    let currentCardIndex = 0;\n    let scrollLocked = false;\n    let allowScroll = false;\n\n    const cardsLength = desktopCards.length || mobileCards.length;\n\n    const activateCard = (indexOrElement) => {\n        let index;\n        if (typeof indexOrElement === 'number') {\n            index = indexOrElement;\n        } else {\n            index = [...desktopCards].indexOf(indexOrElement);\n            if (index === -1) {\n                index = [...mobileCards].indexOf(indexOrElement);\n            }\n        }\n\n        currentCardIndex = index;\n\n        desktopCards.forEach((c, i) => {\n            c.classList.toggle('features__card_active', i === index);\n        });\n\n        mobileCards.forEach((c, i) => {\n            c.classList.toggle('features__card_active', i === index);\n        });\n\n        const activeId = desktopCards[index]?.dataset.id || mobileCards[index]?.dataset.id;\n\n        block.querySelectorAll('.features__content-item').forEach(img => {\n            img.classList.toggle('active', img.dataset.id === activeId);\n        });\n\n        if (mobileCardsContainer && mobileCards[index]) {\n            mobileCards[index].scrollIntoView({ behavior: 'smooth', inline: 'center' });\n        }\n    };\n\n    if (mobileCardsContainer && mobileCards.length) {\n        const lastCard = mobileCards[mobileCards.length - 1];\n\n        const mobileScrollObserver = new IntersectionObserver((entries) => {\n            const entry = entries[0];\n            if (entry.isIntersecting) {\n                allowScroll = true;\n                block.classList.remove('features__block_active');\n            }\n        }, {\n            root: mobileCardsContainer,\n            threshold: 0.9,\n        });\n\n        mobileScrollObserver.observe(lastCard);\n    }\n\n    const scrollHandler = (e) => {\n        if (allowScroll || scrollLocked) return;\n\n        const blockRect = block.getBoundingClientRect();\n\n        const scrollingDown = e.deltaY > 0;\n        if (!scrollingDown && blockRect.top > window.innerHeight - 100) {\n            allowScroll = true;\n            window.removeEventListener('wheel', scrollHandler, { passive: false });\n            return;\n        }\n\n        e.preventDefault();\n        scrollLocked = true;\n\n        let nextIndex = scrollingDown\n            ? Math.min(cardsLength - 1, currentCardIndex + 1)\n            : Math.max(0, currentCardIndex - 1);\n\n        activateCard(nextIndex);\n\n        const isLast = scrollingDown && nextIndex === cardsLength - 1;\n        const isFirst = !scrollingDown && nextIndex === 0;\n\n        if (isLast || isFirst) {\n            allowScroll = true;\n            window.removeEventListener('wheel', scrollHandler, { passive: false });\n\n            setTimeout(() => {\n                block.classList.remove('features__block_active');\n            }, 300);\n        }\n\n        setTimeout(() => {\n            scrollLocked = false;\n        }, 400);\n    };\n\n    const observer = new IntersectionObserver(\n        (entries) => {\n            const entry = entries[0];\n            const isVisible = entry.isIntersecting && entry.intersectionRatio > 0.5;\n\n            if (!isVisible) return;\n\n            const currentScrollY = window.scrollY;\n            const scrollingDown = currentScrollY > lastScrollY;\n            lastScrollY = currentScrollY;\n\n            block.classList.add('features__block_active');\n\n            currentCardIndex = scrollingDown ? 0 : cardsLength - 1;\n            activateCard(currentCardIndex);\n\n            allowScroll = false;\n            scrollLocked = false;\n\n            window.removeEventListener('wheel', scrollHandler, { passive: false });\n            window.addEventListener('wheel', scrollHandler, { passive: false });\n        },\n        { threshold: 0.5 }\n    );\n\n    observer.observe(block);\n});\n","document.querySelectorAll('.questions__item').forEach(item => {\n    const info = item.querySelector('.questions__item-info');\n    const img = item.querySelector('.questions__item-img');\n\n    item.addEventListener('click', (e) => {\n        if (e.target.closest('a')) return;\n\n        const isActive = item.classList.contains('active');\n\n        if (isActive) {\n            item.classList.remove('active');\n            info.style.maxHeight = null;\n            img.style.transform = 'rotate(0deg)';\n        } else {\n            item.classList.add('active');\n            info.style.maxHeight = info.scrollHeight + 16 + 'px';\n            img.style.transform = 'rotate(180deg)';\n        }\n    });\n});\n","// Главное меню\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    const btn = document.getElementById(\"btn-dropdown-menu\");\n    const menu = document.getElementById(\"dropdown-menu\");\n\n    if (btn && menu) {\n        btn.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n            menu.classList.toggle(\"show\");\n        });\n\n        document.addEventListener(\"click\", function (e) {\n            if (!btn.contains(e.target)) {\n                menu.classList.remove(\"show\");\n            }\n        });\n    }\n});\n\n// Мобильное меню\n// Мобильное меню\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    const menuButton = document.querySelector(\".nav_mobile .button-icon\");\n    const mobileMenu = document.querySelector(\".nav_mobile-links\");\n\n    if (menuButton && mobileMenu) {\n        menuButton.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n            const isOpening = !mobileMenu.classList.contains(\"active\");\n            \n            mobileMenu.classList.toggle(\"active\");\n            document.body.classList.toggle(\"menu-open\", isOpening);\n            document.body.classList.toggle(\"menu-backdrop\", isOpening);\n        });\n\n        // Закрытие меню при клике вне его области\n        document.addEventListener(\"click\", function (e) {\n            if (\n                !mobileMenu.contains(e.target) &&\n                !menuButton.contains(e.target) &&\n                mobileMenu.classList.contains(\"active\")\n            ) {\n                mobileMenu.classList.remove(\"active\");\n                document.body.classList.remove(\"menu-open\");\n                document.body.classList.remove(\"menu-backdrop\");\n            }\n        });\n\n        // Закрытие меню при клике на ссылки\n        document.querySelectorAll(\".nav_mobile-link:not(.nav_mobile-links_submenu), .header__sublink-mobile\").forEach(link => {\n            link.addEventListener(\"click\", function() {\n                mobileMenu.classList.remove(\"active\");\n                document.body.classList.remove(\"menu-open\");\n                document.body.classList.remove(\"menu-backdrop\");\n            });\n        });\n    }\n\n    // Обработчик для выпадающего меню \"Продукты\" в мобильной версии\n    const productsButtons = document.querySelectorAll(\".nav_mobile-links_submenu\");\n    if (productsButtons.length) {\n        productsButtons.forEach(button => {\n            button.addEventListener(\"click\", function (e) {\n                // Предотвращаем закрытие меню при клике на подменю\n                e.stopPropagation();\n                \n                // Переключаем состояние только для текущего подменю\n                const isOpening = !this.classList.contains(\"open\");\n                this.classList.toggle(\"open\");\n                \n                // Закрываем другие открытые подменю\n                productsButtons.forEach(otherButton => {\n                    if (otherButton !== this && otherButton.classList.contains(\"open\")) {\n                        otherButton.classList.remove(\"open\");\n                    }\n                });\n            });\n        });\n    }\n});\n"],"names":[],"mappings":"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"}